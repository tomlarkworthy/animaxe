/// <reference path="../node_modules/rx/ts/rx.all.d.ts" />
/// <reference path="../types/node.d.ts" />
/// <reference path="../types/should.d.ts" />
require('source-map-support').install();
var Ax = require("../src/animaxe");
var Rx = require("rx");
//create an animator, at 30FPS
try {
    var canvas = document.getElementById("canvas");
    console.log("browser", canvas);
}
catch (err) {
    console.log(err);
    var Canvas = require('canvas');
    var canvas = new Canvas(100, 100);
    console.log("node", canvas);
}
console.log("context", context);
var context = canvas.getContext('2d');
var animator = new Ax.Animator(context); /*should be based on context*/
function thickLine1tick(thickness, start, end, css_color) {
    //console.log("thickLine1tick: ", thickness, start, end, css_color);
    var css = Ax.toStreamColor(css_color);
    return Ax.take(1, Ax.draw(function (tick) {
        tick.ctx.strokeStyle = css.next(tick.clock);
        tick.ctx.beginPath();
        var startVal = start.next(tick.clock);
        var endVal = end.next(tick.clock);
        var ctx = tick.ctx;
        ctx.lineWidth = thickness;
        console.log("thickLine1tick: drawing between ", tick.clock, startVal, endVal);
        ctx.moveTo(startVal[0], startVal[1]);
        ctx.lineTo(endVal[0], endVal[1]);
        ctx.closePath();
        ctx.stroke();
    }));
}
function sparkLine(start, end, css_color) {
    return thickLine1tick(6, start, end, css_color)
        .then(thickLine1tick(2, Ax.displaceT(-0.1, start), Ax.displaceT(-0.1, end), css_color))
        .then(thickLine1tick(1, Ax.displaceT(-0.2, start), Ax.displaceT(-0.2, end), css_color));
}
//large circle funcitons
var bigSin = Ax.sin(1).map(function (x) { return x * 40 + 50; });
var bigCos = Ax.cos(1).map(function (x) { return x * 40 + 50; });
var red = Ax.sin(2).map(function (x) { return x * 125 + 125; });
var green = Ax.sin(2).map(function (x) { return x * 55 + 200; });
animator.play(Ax.changeColor("#000000", Ax.rect([0, 0], [100, 100]))); //draw black background
animator.play(Ax.emit(
//Ax.assertClock([0,0.1,0.3,0.3,0.4,0.5,0.6,0.8,0.9,10],
sparkLine(Ax.point(bigSin, bigCos), Ax.displaceT(-0.1, Ax.point(bigSin, bigCos)), Ax.color(red, green, 0, 0.5))));
try {
    //browser
    var time;
    var render = function () {
        window.requestAnimationFrame(render);
        var now = new Date().getTime(), dt = now - (time || now);
        time = now;
        animator.root.onNext(new Ax.DrawTick(animator.ctx, 0, dt / 1000));
    };
    render();
}
catch (err) {
    //node.js
    animator.play(Ax.save(100, 100, "images/tutorial2.gif"));
    animator.ticker(Rx.Observable.return(0.1).repeat(10));
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV4YW1wbGUyLnRzIl0sIm5hbWVzIjpbInRoaWNrTGluZTF0aWNrIiwic3BhcmtMaW5lIl0sIm1hcHBpbmdzIjoiQUFBQSxBQUdBLDBEQUgwRDtBQUMxRCwyQ0FBMkM7QUFDM0MsNkNBQTZDO0FBQzdDLE9BQU8sQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDO0FBQ3hDLElBQU8sRUFBRSxXQUFXLGdCQUFnQixDQUFDLENBQUM7QUFDdEMsSUFBTyxFQUFFLFdBQVcsSUFBSSxDQUFDLENBQUM7QUFFMUIsQUFDQSw4QkFEOEI7SUFDMUIsQ0FBQztJQUNELElBQUksTUFBTSxHQUFPLFFBQVEsQ0FBQyxjQUFjLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDbkQsT0FBTyxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUUsTUFBTSxDQUFDLENBQUM7QUFDbkMsQ0FBRTtBQUFBLEtBQUssQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDWCxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ2pCLElBQUksTUFBTSxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUMvQixJQUFJLE1BQU0sR0FBRyxJQUFJLE1BQU0sQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDbEMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUM7QUFDaEMsQ0FBQztBQUVELE9BQU8sQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQ2hDLElBQUksT0FBTyxHQUE2QixNQUFNLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBRWhFLElBQUksUUFBUSxHQUFnQixJQUFJLEVBQUUsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLEVBQUUsOEJBQUQsQUFBK0I7QUFHcEYsd0JBQ0ksU0FBaUIsRUFDakIsS0FBcUIsRUFDckIsR0FBbUIsRUFDbkIsU0FBa0M7SUFFbENBLEFBQ0FBLG9F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QUNGLE1BQU0sRUFBRSxDQUFDO0FBQ2IsQ0FBRTtBQUFBLEtBQUssQ0FBQSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDVixBQUNBLFNBRFM7SUFDVCxRQUFRLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxzQkFBc0IsQ0FBQyxDQUFDLENBQUM7SUFDekQsUUFBUSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUMxRCxDQUFDIiwiZmlsZSI6ImV4YW1wbGUyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uL25vZGVfbW9kdWxlcy9yeC90cy9yeC5hbGwuZC50c1wiIC8+XG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vdHlwZXMvbm9kZS5kLnRzXCIgLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi90eXBlcy9zaG91bGQuZC50c1wiIC8+XG5yZXF1aXJlKCdzb3VyY2UtbWFwLXN1cHBvcnQnKS5pbnN0YWxsKCk7XG5pbXBvcnQgQXggPSByZXF1aXJlKFwiLi4vc3JjL2FuaW1heGVcIik7XG5pbXBvcnQgUnggPSByZXF1aXJlKFwicnhcIik7XG5cbi8vY3JlYXRlIGFuIGFuaW1hdG9yLCBhdCAzMEZQU1xudHJ5IHtcbiAgICB2YXIgY2FudmFzOmFueSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY2FudmFzXCIpO1xuICAgIGNvbnNvbGUubG9nKFwiYnJvd3NlclwiLCBjYW52YXMpO1xufSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB2YXIgQ2FudmFzID0gcmVxdWlyZSgnY2FudmFzJyk7XG4gICAgdmFyIGNhbnZhcyA9IG5ldyBDYW52YXMoMTAwLCAxMDApO1xuICAgIGNvbnNvbGUubG9nKFwibm9kZVwiLCBjYW52YXMpO1xufVxuXG5jb25zb2xlLmxvZyhcImNvbnRleHRcIiwgY29udGV4dCk7XG52YXIgY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG5cbnZhciBhbmltYXRvcjogQXguQW5pbWF0b3IgPSBuZXcgQXguQW5pbWF0b3IoY29udGV4dCk7IC8qc2hvdWxkIGJlIGJhc2VkIG9uIGNvbnRleHQqL1xuXG5cbmZ1bmN0aW9uIHRoaWNrTGluZTF0aWNrKFxuICAgIHRoaWNrbmVzczogbnVtYmVyLFxuICAgIHN0YXJ0OiBBeC5Qb2ludFN0cmVhbSxcbiAgICBlbmQ6IEF4LlBvaW50U3RyZWFtLFxuICAgIGNzc19jb2xvcjogc3RyaW5nIHwgQXguQ29sb3JTdHJlYW0pXG46IEF4LkFuaW1hdGlvbiB7XG4gICAgLy9jb25zb2xlLmxvZyhcInRoaWNrTGluZTF0aWNrOiBcIiwgdGhpY2tuZXNzLCBzdGFydCwgZW5kLCBjc3NfY29sb3IpO1xuICAgIHZhciBjc3MgPSBBeC50b1N0cmVhbUNvbG9yKGNzc19jb2xvcik7XG4gICAgcmV0dXJuIEF4LnRha2UoMSwgQXguZHJhdyhmdW5jdGlvbih0aWNrOiBBeC5EcmF3VGljaykge1xuICAgICAgICB0aWNrLmN0eC5zdHJva2VTdHlsZSA9IGNzcy5uZXh0KHRpY2suY2xvY2spO1xuICAgICAgICB0aWNrLmN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgdmFyIHN0YXJ0VmFsID0gc3RhcnQubmV4dCh0aWNrLmNsb2NrKTtcbiAgICAgICAgdmFyIGVuZFZhbCA9IGVuZC5uZXh0KHRpY2suY2xvY2spO1xuICAgICAgICB2YXIgY3R4ID0gdGljay5jdHg7XG4gICAgICAgIGN0eC5saW5lV2lkdGggPSB0aGlja25lc3M7XG4gICAgICAgIGNvbnNvbGUubG9nKFwidGhpY2tMaW5lMXRpY2s6IGRyYXdpbmcgYmV0d2VlbiBcIiwgdGljay5jbG9jaywgc3RhcnRWYWwsIGVuZFZhbCk7XG4gICAgICAgIGN0eC5tb3ZlVG8oc3RhcnRWYWxbMF0sIHN0YXJ0VmFsWzFdKTtcbiAgICAgICAgY3R4LmxpbmVUbyhlbmRWYWxbMF0sIGVuZFZhbFsxXSk7XG4gICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcbiAgICAgICAgY3R4LnN0cm9rZSgpO1xuICAgIH0pKTtcbn1cblxuZnVuY3Rpb24gc3BhcmtMaW5lKHN0YXJ0OiBBeC5Qb2ludFN0cmVhbSwgZW5kOiBBeC5Qb2ludFN0cmVhbSwgY3NzX2NvbG9yOiBzdHJpbmcgfCBBeC5Db2xvclN0cmVhbSk6IEF4LkFuaW1hdGlvbiB7IC8vd2UgY291bGQgYmUgY2xldmVyIGFuZCBsZXQgc3BhcmsgdGFrZSBhIHNlcSwgYnV0IHVzZXIgZnVuY3Rpb25zIHNob3VsZCBiZSBzaW1wbGVcbiAgICByZXR1cm4gdGhpY2tMaW5lMXRpY2soNixcbiAgICAgICAgICAgIHN0YXJ0LFxuICAgICAgICAgICAgZW5kLCBjc3NfY29sb3IpXG4gICAgICAgIC50aGVuKHRoaWNrTGluZTF0aWNrKDIsXG4gICAgICAgICAgICBBeC5kaXNwbGFjZVQoLTAuMSwgc3RhcnQpLCAvLyB0b2RvLCB0aGlzIG1ldGhvZCBkb2VzIG5vdCBnZXQgY2FsbGVkIGV2ZXJ5IHJvdW5kXG4gICAgICAgICAgICBBeC5kaXNwbGFjZVQoLTAuMSwgZW5kKSxcbiAgICAgICAgICAgIGNzc19jb2xvcikpXG4gICAgICAgIC50aGVuKHRoaWNrTGluZTF0aWNrKDEsXG4gICAgICAgICAgICBBeC5kaXNwbGFjZVQoLTAuMiwgc3RhcnQpLFxuICAgICAgICAgICAgQXguZGlzcGxhY2VUKC0wLjIsIGVuZCksXG4gICAgICAgICAgICBjc3NfY29sb3IpKTtcbn1cblxuLy9sYXJnZSBjaXJjbGUgZnVuY2l0b25zXG52YXIgYmlnU2luID0gQXguc2luKDEpLm1hcCh4ID0+IHggKiA0MCArIDUwKTtcbnZhciBiaWdDb3MgPSBBeC5jb3MoMSkubWFwKHggPT4geCAqIDQwICsgNTApO1xuXG52YXIgcmVkICAgPSBBeC5zaW4oMikubWFwKHggPT4geCAqIDEyNSArIDEyNSk7XG52YXIgZ3JlZW4gPSBBeC5zaW4oMikubWFwKHggPT4geCAqIDU1ICsgMjAwKTtcblxuXG5hbmltYXRvci5wbGF5KEF4LmNoYW5nZUNvbG9yKFwiIzAwMDAwMFwiLCBBeC5yZWN0KFswLDBdLFsxMDAsMTAwXSkpKTsgLy9kcmF3IGJsYWNrIGJhY2tncm91bmRcbmFuaW1hdG9yLnBsYXkoXG4gICAgICAgIEF4LmVtaXQoXG4gICAgICAgICAgICAvL0F4LmFzc2VydENsb2NrKFswLDAuMSwwLjMsMC4zLDAuNCwwLjUsMC42LDAuOCwwLjksMTBdLFxuICAgICAgICAgICAgICAgIHNwYXJrTGluZShcbiAgICAgICAgICAgICAgICAgICAgQXgucG9pbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICBiaWdTaW4sXG4gICAgICAgICAgICAgICAgICAgICAgICBiaWdDb3NcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgQXguZGlzcGxhY2VUKC0wLjEsIEF4LnBvaW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgYmlnU2luLFxuICAgICAgICAgICAgICAgICAgICAgICAgYmlnQ29zXG4gICAgICAgICAgICAgICAgICAgICkpLFxuICAgICAgICAgICAgICAgICAgICBBeC5jb2xvcihyZWQsZ3JlZW4sMCwwLjUpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgLy8pXG4gICAgICAgIClcbiAgICApO1xuXG50cnkge1xuICAgIC8vYnJvd3NlclxuICAgIHZhciB0aW1lO1xuICAgIHZhciByZW5kZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShyZW5kZXIpO1xuICAgICAgICB2YXIgbm93ID0gbmV3IERhdGUoKS5nZXRUaW1lKCksXG4gICAgICAgICAgICBkdCA9IG5vdyAtICh0aW1lIHx8IG5vdyk7XG4gICAgICAgIHRpbWUgPSBub3c7XG4gICAgICAgIGFuaW1hdG9yLnJvb3Qub25OZXh0KG5ldyBBeC5EcmF3VGljayhhbmltYXRvci5jdHgsIDAsIGR0LzEwMDApKTtcbiAgICB9O1xuICAgIHJlbmRlcigpO1xufSBjYXRjaChlcnIpIHtcbiAgICAvL25vZGUuanNcbiAgICBhbmltYXRvci5wbGF5KEF4LnNhdmUoMTAwLCAxMDAsIFwiaW1hZ2VzL3R1dG9yaWFsMi5naWZcIikpO1xuICAgIGFuaW1hdG9yLnRpY2tlcihSeC5PYnNlcnZhYmxlLnJldHVybigwLjEpLnJlcGVhdCgxMCkpO1xufVxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9