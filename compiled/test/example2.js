/// <reference path="../node_modules/rx/ts/rx.all.d.ts" />
/// <reference path="../types/node.d.ts" />
/// <reference path="../types/should.d.ts" />
/// <reference path="../types/mocha.d.ts" />
require('source-map-support').install();
var Ax = require("../src/animaxe");
var helper = require("./helper");
require("should");
var animator = helper.getExampleAnimator();
//a line between two points of a specified thickness and color (which are temporally varying parameters)
function thickLine1tick(thickness, start, end, css_color) {
    //console.log("thickLine1tick: ", thickness, start, end, css_color);
    var css = Ax.toStreamColor(css_color);
    return Ax.take(1, Ax.draw(function () {
        var css_next = css.init();
        var start_next = start.init();
        var end_next = end.init();
        return function (tick) {
            tick.ctx.strokeStyle = css_next(tick.clock);
            tick.ctx.beginPath();
            var startVal = start_next(tick.clock);
            var endVal = end_next(tick.clock);
            var ctx = tick.ctx;
            ctx.lineWidth = thickness;
            //console.log("thickLine1tick: drawing between ", tick.clock, startVal, endVal);
            ctx.moveTo(startVal[0], startVal[1]);
            ctx.lineTo(endVal[0], endVal[1]);
            ctx.closePath();
            ctx.stroke();
        };
    }));
}
/**
 * Three frame animation of a thinning line. Animations are displaced in time so even if the start and end streams move
 * The line doesn't
 */
function sparkLine(start, end, css_color) {
    return thickLine1tick(6, //thick line
    start, end, css_color)
        .then(thickLine1tick(2, //medium line
    Ax.displaceT(-0.1, start), Ax.displaceT(-0.1, end), css_color))
        .then(thickLine1tick(1, //thin line
    Ax.displaceT(-0.2, start), Ax.displaceT(-0.2, end), css_color));
}
//large circle funcitons
var bigSin = Ax.sin(1).map(function (x) { return x * 40 + 50; });
var bigCos = Ax.cos(1).map(function (x) { return x * 40 + 50; });
//periodic color
var red = 255;
var green = Ax.sin(2).map(function (x) { return x * 100 + 55; });
var blue = 50;
animator.play(Ax.changeColor("#000000", Ax.rect([0, 0], [100, 100]))); //draw black background
animator.play(Ax.emit(sparkLine(Ax.point(bigSin, bigCos), Ax.displaceT(-0.1, Ax.point(bigSin, bigCos)), Ax.rgba(red, green, blue, 1))));
helper.playExample("example2", 20, animator, 100, 100);
describe('example2', function () {
    it('should match the reference', function (done) {
        helper.sameExample("example2", "ref2", function (same) {
            console.log("example 2 equals result", same);
            same.should.equal(true);
            done();
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV4YW1wbGUyLnRzIl0sIm5hbWVzIjpbInRoaWNrTGluZTF0aWNrIiwic3BhcmtMaW5lIl0sIm1hcHBpbmdzIjoiQUFBQSwwREFBMEQ7QUFDMUQsMkNBQTJDO0FBQzNDLDZDQUE2QztBQUM3Qyw0Q0FBNEM7QUFDNUMsT0FBTyxDQUFDLG9CQUFvQixDQUFDLENBQUMsT0FBTyxFQUFFLENBQUM7QUFDeEMsSUFBTyxFQUFFLFdBQVcsZ0JBQWdCLENBQUMsQ0FBQztBQUV0QyxJQUFPLE1BQU0sV0FBVyxVQUFVLENBQUMsQ0FBQztBQUNwQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7QUFFbEIsSUFBSSxRQUFRLEdBQWdCLE1BQU0sQ0FBQyxrQkFBa0IsRUFBRSxDQUFDO0FBRXhELHdHQUF3RztBQUN4Ryx3QkFDSSxTQUFpQixFQUNqQixLQUFxQixFQUNyQixHQUFtQixFQUNuQixTQUFrQztJQUVsQ0Esb0VBQW9FQTtJQUNwRUEsSUFBSUEsR0FBR0EsR0FBR0EsRUFBRUEsQ0FBQ0EsYUFBYUEsQ0FBQ0EsU0FBU0EsQ0FBQ0EsQ0FBQ0E7SUFDdENBLE1BQU1BLENBQUNBLEVBQUVBLENBQUNBLElBQUlBLENBQUNBLENBQUNBLEVBQUVBLEVBQUVBLENBQUNBLElBQUlBLENBQ3JCQTtRQUNJQSxJQUFJQSxRQUFRQSxHQUFHQSxHQUFHQSxDQUFDQSxJQUFJQSxFQUFFQSxDQUFDQTtRQUMxQkEsSUFBSUEsVUFBVUEsR0FBR0EsS0FBS0EsQ0FBQ0EsSUFBSUEsRUFBRUEsQ0FBQ0E7UUFDOUJBLElBQUlBLFFBQVFBLEdBQUdBLEdBQUdBLENBQUNBLElBQUlBLEVBQUVBLENBQUNBO1FBQzFCQSxNQUFNQSxDQUFDQSxVQUFTQSxJQUFpQkE7WUFDN0IsSUFBSSxDQUFDLEdBQUcsQ0FBQyxXQUFXLEdBQUcsUUFBUSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUM1QyxJQUFJLENBQUMsR0FBRyxDQUFDLFNBQVMsRUFBRSxDQUFDO1lBQ3JCLElBQUksUUFBUSxHQUFH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RSxDQUFDLEtBQUssQ0FDSixNQUFNLEVBQ04sTUFBTSxDQUNULENBQ0osRUFDRCxFQUFFLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBQyxLQUFLLEVBQUMsSUFBSSxFQUFDLENBQUMsQ0FBQyxDQUM1QixDQUNSLENBQ0osQ0FBQztBQUVOLE1BQU0sQ0FBQyxXQUFXLENBQUMsVUFBVSxFQUFFLEVBQUUsRUFBRSxRQUFRLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0FBRXZELFFBQVEsQ0FBQyxVQUFVLEVBQUU7SUFDakIsRUFBRSxDQUFFLDRCQUE0QixFQUFFLFVBQVMsSUFBSTtRQUMzQyxNQUFNLENBQUMsV0FBVyxDQUFDLFVBQVUsRUFBRSxNQUFNLEVBQUUsVUFBUyxJQUFJO1lBQ2hELE9BQU8sQ0FBQyxHQUFHLENBQUMseUJBQXlCLEVBQUUsSUFBSSxDQUFDLENBQUM7WUFDN0MsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDeEIsSUFBSSxFQUFFLENBQUM7UUFDWCxDQUFDLENBQUMsQ0FBQTtJQUNOLENBQUMsQ0FBQyxDQUFDO0FBQ1AsQ0FBQyxDQUFDLENBQUMiLCJmaWxlIjoiZXhhbXBsZTIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vbm9kZV9tb2R1bGVzL3J4L3RzL3J4LmFsbC5kLnRzXCIgLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi90eXBlcy9ub2RlLmQudHNcIiAvPlxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uL3R5cGVzL3Nob3VsZC5kLnRzXCIgLz5cbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi90eXBlcy9tb2NoYS5kLnRzXCIgLz5cbnJlcXVpcmUoJ3NvdXJjZS1tYXAtc3VwcG9ydCcpLmluc3RhbGwoKTtcbmltcG9ydCBBeCA9IHJlcXVpcmUoXCIuLi9zcmMvYW5pbWF4ZVwiKTtcbmltcG9ydCBSeCA9IHJlcXVpcmUoXCJyeFwiKTtcbmltcG9ydCBoZWxwZXIgPSByZXF1aXJlKFwiLi9oZWxwZXJcIik7XG5yZXF1aXJlKFwic2hvdWxkXCIpO1xuXG52YXIgYW5pbWF0b3I6IEF4LkFuaW1hdG9yID0gaGVscGVyLmdldEV4YW1wbGVBbmltYXRvcigpO1xuXG4vL2EgbGluZSBiZXR3ZWVuIHR3byBwb2ludHMgb2YgYSBzcGVjaWZpZWQgdGhpY2tuZXNzIGFuZCBjb2xvciAod2hpY2ggYXJlIHRlbXBvcmFsbHkgdmFyeWluZyBwYXJhbWV0ZXJzKVxuZnVuY3Rpb24gdGhpY2tMaW5lMXRpY2soXG4gICAgdGhpY2tuZXNzOiBudW1iZXIsXG4gICAgc3RhcnQ6IEF4LlBvaW50U3RyZWFtLFxuICAgIGVuZDogQXguUG9pbnRTdHJlYW0sXG4gICAgY3NzX2NvbG9yOiBzdHJpbmcgfCBBeC5Db2xvclN0cmVhbSlcbjogQXguQW5pbWF0aW9uIHtcbiAgICAvL2NvbnNvbGUubG9nKFwidGhpY2tMaW5lMXRpY2s6IFwiLCB0aGlja25lc3MsIHN0YXJ0LCBlbmQsIGNzc19jb2xvcik7XG4gICAgdmFyIGNzcyA9IEF4LnRvU3RyZWFtQ29sb3IoY3NzX2NvbG9yKTtcbiAgICByZXR1cm4gQXgudGFrZSgxLCBBeC5kcmF3KFxuICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICB2YXIgY3NzX25leHQgPSBjc3MuaW5pdCgpO1xuICAgICAgICAgICAgdmFyIHN0YXJ0X25leHQgPSBzdGFydC5pbml0KCk7XG4gICAgICAgICAgICB2YXIgZW5kX25leHQgPSBlbmQuaW5pdCgpO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHRpY2s6IEF4LkRyYXdUaWNrKSB7XG4gICAgICAgICAgICAgICAgdGljay5jdHguc3Ryb2tlU3R5bGUgPSBjc3NfbmV4dCh0aWNrLmNsb2NrKTtcbiAgICAgICAgICAgICAgICB0aWNrLmN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgICAgICB2YXIgc3RhcnRWYWwgPSBzdGFydF9uZXh0KHRpY2suY2xvY2spO1xuICAgICAgICAgICAgICAgIHZhciBlbmRWYWwgPSBlbmRfbmV4dCh0aWNrLmNsb2NrKTtcbiAgICAgICAgICAgICAgICB2YXIgY3R4ID0gdGljay5jdHg7XG4gICAgICAgICAgICAgICAgY3R4LmxpbmVXaWR0aCA9IHRoaWNrbmVzcztcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwidGhpY2tMaW5lMXRpY2s6IGRyYXdpbmcgYmV0d2VlbiBcIiwgdGljay5jbG9jaywgc3RhcnRWYWwsIGVuZFZhbCk7XG4gICAgICAgICAgICAgICAgY3R4Lm1vdmVUbyhzdGFydFZhbFswXSwgc3RhcnRWYWxbMV0pO1xuICAgICAgICAgICAgICAgIGN0eC5saW5lVG8oZW5kVmFsWzBdLCBlbmRWYWxbMV0pO1xuICAgICAgICAgICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcbiAgICAgICAgICAgICAgICBjdHguc3Ryb2tlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICApKTtcbn1cblxuLyoqXG4gKiBUaHJlZSBmcmFtZSBhbmltYXRpb24gb2YgYSB0aGlubmluZyBsaW5lLiBBbmltYXRpb25zIGFyZSBkaXNwbGFjZWQgaW4gdGltZSBzbyBldmVuIGlmIHRoZSBzdGFydCBhbmQgZW5kIHN0cmVhbXMgbW92ZVxuICogVGhlIGxpbmUgZG9lc24ndFxuICovXG5mdW5jdGlvbiBzcGFya0xpbmUoc3RhcnQ6IEF4LlBvaW50U3RyZWFtLCBlbmQ6IEF4LlBvaW50U3RyZWFtLCBjc3NfY29sb3I6IHN0cmluZyB8IEF4LkNvbG9yU3RyZWFtKTogQXguQW5pbWF0aW9uIHsgLy93ZSBjb3VsZCBiZSBjbGV2ZXIgYW5kIGxldCBzcGFyayB0YWtlIGEgc2VxLCBidXQgdXNlciBmdW5jdGlvbnMgc2hvdWxkIGJlIHNpbXBsZVxuICAgIHJldHVybiB0aGlja0xpbmUxdGljayg2LCAvL3RoaWNrIGxpbmVcbiAgICAgICAgICAgIHN0YXJ0LFxuICAgICAgICAgICAgZW5kLCBjc3NfY29sb3IpXG4gICAgICAgIC50aGVuKHRoaWNrTGluZTF0aWNrKDIsIC8vbWVkaXVtIGxpbmVcbiAgICAgICAgICAgIEF4LmRpc3BsYWNlVCgtMC4xLCBzdGFydCksXG4gICAgICAgICAgICBBeC5kaXNwbGFjZVQoLTAuMSwgZW5kKSxcbiAgICAgICAgICAgIGNzc19jb2xvcikpXG4gICAgICAgIC50aGVuKHRoaWNrTGluZTF0aWNrKDEsIC8vdGhpbiBsaW5lXG4gICAgICAgICAgICBBeC5kaXNwbGFjZVQoLTAuMiwgc3RhcnQpLFxuICAgICAgICAgICAgQXguZGlzcGxhY2VUKC0wLjIsIGVuZCksXG4gICAgICAgICAgICBjc3NfY29sb3IpKTtcbn1cblxuLy9sYXJnZSBjaXJjbGUgZnVuY2l0b25zXG52YXIgYmlnU2luID0gQXguc2luKDEpLm1hcCh4ID0+IHggKiA0MCArIDUwKTtcbnZhciBiaWdDb3MgPSBBeC5jb3MoMSkubWFwKHggPT4geCAqIDQwICsgNTApO1xuXG4vL3BlcmlvZGljIGNvbG9yXG52YXIgcmVkICAgPSAyNTU7XG52YXIgZ3JlZW4gPSBBeC5zaW4oMikubWFwKHggPT4geCAqIDEwMCArIDU1KTtcbnZhciBibHVlID0gNTA7XG5cblxuYW5pbWF0b3IucGxheShBeC5jaGFuZ2VDb2xvcihcIiMwMDAwMDBcIiwgQXgucmVjdChbMCwwXSxbMTAwLDEwMF0pKSk7IC8vZHJhdyBibGFjayBiYWNrZ3JvdW5kXG5hbmltYXRvci5wbGF5KFxuICAgICAgICBBeC5lbWl0KFxuICAgICAgICAgICAgICAgIHNwYXJrTGluZShcbiAgICAgICAgICAgICAgICAgICAgQXgucG9pbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICBiaWdTaW4sXG4gICAgICAgICAgICAgICAgICAgICAgICBiaWdDb3NcbiAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgQXguZGlzcGxhY2VUKC0wLjEsXG4gICAgICAgICAgICAgICAgICAgICAgICBBeC5wb2ludChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaWdTaW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmlnQ29zXG4gICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIEF4LnJnYmEocmVkLGdyZWVuLGJsdWUsMSlcbiAgICAgICAgICAgICAgICApXG4gICAgICAgIClcbiAgICApO1xuXG5oZWxwZXIucGxheUV4YW1wbGUoXCJleGFtcGxlMlwiLCAyMCwgYW5pbWF0b3IsIDEwMCwgMTAwKTtcblxuZGVzY3JpYmUoJ2V4YW1wbGUyJywgZnVuY3Rpb24gKCkge1xuICAgIGl0ICgnc2hvdWxkIG1hdGNoIHRoZSByZWZlcmVuY2UnLCBmdW5jdGlvbihkb25lKSB7XG4gICAgICAgIGhlbHBlci5zYW1lRXhhbXBsZShcImV4YW1wbGUyXCIsIFwicmVmMlwiLCBmdW5jdGlvbihzYW1lKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImV4YW1wbGUgMiBlcXVhbHMgcmVzdWx0XCIsIHNhbWUpO1xuICAgICAgICAgICAgc2FtZS5zaG91bGQuZXF1YWwodHJ1ZSk7XG4gICAgICAgICAgICBkb25lKCk7XG4gICAgICAgIH0pXG4gICAgfSk7XG59KTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=