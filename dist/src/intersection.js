var frp = require('./frp');
var zip = require("./zip");
// stream intersection &&& in AFRP
function intersection(a, b) {
    return new frp.SignalFn(function (upstream) {
        var a_out = a.attach(upstream);
        var b_out = b.attach(upstream);
        return zip.zip(function (values) { return extend(values[0], values[1]); }, a_out, b_out);
    });
}
exports.intersection = intersection;
function extend(first, second) {
    var result = {};
    for (var id in first) {
        result[id] = first[id];
    }
    for (var id in second) {
        if (!result.hasOwnProperty(id)) {
            result[id] = second[id];
        }
    }
    return result;
}
function first(sf) {
    return new frp.SignalFn(function (upstream) {
        var first = sf.attach(upstream);
        var second = upstream;
        return zip.zip(function (values) { return extend(values[0], values[1]); }, first, second);
    });
}
exports.first = first;
function arr(fn) {
    return new frp.SignalFn(function (upstream) { return upstream.map(fn); });
}
exports.arr = arr;
/// >>> operator
/*
export function pipe<In, Middle, Out>(first: frp.SignalFn<In, Middle>, second: frp.SignalFn<Middle, Out>): frp.SignalFn<In, Out> {
    return new frp.SignalFn<In, Out>(
        (upstream: Rx.Observable<In>) => second.attach(first.attach(upstream))
    );
}

/// >>loop operator
export function loop<In, Middle, Out>(first: frp.SignalFn<In, Middle>, second: frp.SignalFn<Middle, Out>): frp.SignalFn<In, Out> {
    return new frp.SignalFn<In, Out>(
        (upstream: Rx.Observable<In>) => second.attach(first.attach(upstream))
    );
}*/

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9pbnRlcnNlY3Rpb24udHMiXSwibmFtZXMiOlsiaW50ZXJzZWN0aW9uIiwiZXh0ZW5kIiwiZmlyc3QiLCJhcnIiXSwibWFwcGluZ3MiOiJBQUFBLElBQVksR0FBRyxXQUFNLE9BQU8sQ0FBQyxDQUFBO0FBRTdCLElBQVksR0FBRyxXQUFNLE9BR3JCLENBQUMsQ0FIMkI7QUFFNUIsa0NBQWtDO0FBQ2xDLHNCQUNLLENBQXlCLEVBQUUsQ0FBeUI7SUFDakRBLE1BQU1BLENBQUNBLElBQUlBLEdBQUdBLENBQUNBLFFBQVFBLENBQ25CQSxVQUFDQSxRQUEyQkE7UUFDeEJBLElBQUlBLEtBQUtBLEdBQXdCQSxDQUFDQSxDQUFDQSxNQUFNQSxDQUFDQSxRQUFRQSxDQUFDQSxDQUFDQTtRQUNwREEsSUFBSUEsS0FBS0EsR0FBd0JBLENBQUNBLENBQUNBLE1BQU1BLENBQUNBLFFBQVFBLENBQUNBLENBQUNBO1FBQ3BEQSxNQUFNQSxDQUFDQSxHQUFHQSxDQUFDQSxHQUFHQSxDQUNWQSxVQUFDQSxNQUFvQkEsSUFBS0EsT0FBQUEsTUFBTUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsRUFBRUEsTUFBTUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsRUFBNUJBLENBQTRCQSxFQUN0REEsS0FBS0EsRUFBRUEsS0FBS0EsQ0FBQ0EsQ0FBQ0E7SUFDdEJBLENBQUNBLENBQ0pBLENBQUFBO0FBRVRBLENBQUNBO0FBWmUsb0JBQVksZUFZM0IsQ0FBQTtBQUVELGdCQUFzQixLQUFRLEVBQUUsTUFBUztJQUNyQ0MsSUFBSUEsTUFBTUEsR0FBV0EsRUFBRUEsQ0FBQ0E7SUFDeEJBLEdBQUdBLENBQUNBLENBQUNBLEdBQUdBLENBQUNBLEVBQUVBLElBQUlBLEtBQUtBLENBQUNBLENBQUNBLENBQUNBO1FBQ25CQSxNQUFNQSxDQUFDQSxFQUFFQSxDQUFDQSxHQUFHQSxLQUFLQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQTtJQUMzQkEsQ0FBQ0E7SUFDREEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsRUFBRUEsSUFBSUEsTUFBTUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7UUFDcEJBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLE1BQU1BLENBQUNBLGNBQWNBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO1lBQzdCQSxNQUFNQSxDQUFDQSxFQUFFQSxDQUFDQSxHQUFHQSxNQUFNQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQTtRQUM1QkEsQ0FBQ0E7SUFDTEEsQ0FBQ0E7SUFDREEsTUFBTUEsQ0FBQ0EsTUFBTUEsQ0FBQ0E7QUFDbEJBLENBQUNBO0FBRUQsZUFDSyxFQUF5QjtJQUN0QkMsTUFBTUEsQ0FBQ0EsSUFBSUEsR0FBR0EsQ0FBQ0EsUUFBUUEsQ0FDbkJBLFVBQUNBLFFBQXlDQTtRQUN0Q0EsSUFBSUEsS0FBS0EsR0FBdUJBLEVBQUVBLENBQUNBLE1BQU1BLENBQUNBLFFBQVFBLENBQUNBLENBQUNBO1FBQ3BEQSxJQUFJQSxNQUFNQSxHQUErQkEsUUFBUUEsQ0FBQ0E7UUFDbERBLE1BQU1BLENBQUNBLEdBQUdBLENBQUNBLEdBQUdBLENBQ1ZBLFVBQUNBLE1BQTBCQSxJQUFLQSxPQUFBQSxNQUFNQSxDQUFDQSxNQUFNQSxDQUFDQSxDQUFDQSxDQUFDQSxFQUFFQSxNQUFNQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQSxFQUE1QkEsQ0FBNEJBLEVBQzVEQSxLQUFLQSxFQUFFQSxNQUFNQSxDQUFDQSxDQUFDQTtJQUN2QkEsQ0FBQ0EsQ0FDSkEsQ0FBQUE7QUFDVEEsQ0FBQ0E7QUFYZSxhQUFLLFFBV3BCLENBQUE7QUFFRCxhQUFrRCxFQUFzQjtJQUNwRUMsTUFBTUEsQ0FBQ0EsSUFBSUEsR0FBR0EsQ0FBQ0EsUUFBUUEsQ0FDbkJBLFVBQUNBLFFBQTJCQSxJQUFLQSxPQUFBQSxRQUFRQSxDQUFDQSxHQUFHQSxDQUFDQSxFQUFFQSxDQUFDQSxFQUFoQkEsQ0FBZ0JBLENBQ3BEQSxDQUFDQTtBQUNOQSxDQUFDQTtBQUplLFdBQUcsTUFJbEIsQ0FBQTtBQUNELGdCQUFnQjtBQUNoQjs7Ozs7Ozs7Ozs7O0dBWUciLCJmaWxlIjoic3JjL2ludGVyc2VjdGlvbi5qcyIsInNvdXJjZXNDb250ZW50IjpbbnVsbF0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
