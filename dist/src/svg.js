var parser = require('../peg/svg');
var DEBUG = true;
function svgpath(before, svg) {
    var ast = parser.parse(svg);
    console.log(ast);
    // vertical lineto
    // turn the array of commands into a list of chainable animation functions
    var commands = ast.map(function (command) {
        if (command.relative)
            throw new Error("Does not support relative mode yet, we should use state.end");
        return function (acc) {
            var op;
            var end;
            if (command.command == 'moveto') {
                op = acc.operation.moveTo([command.x, command.y]);
                end = [command.x, command.y];
            }
            else if (command.command == 'lineto') {
                op = acc.operation.lineTo([command.x, command.y]);
                end = [command.x, command.y];
            }
            else if (command.command == 'closepath') {
                op = acc.operation.closePath();
            }
            else if (command.command == 'curveto') {
                op = acc.operation.bezierCurveTo([command.x, command.y], [command.x1, command.y1], [command.x2, command.y2]);
                end = [command.x, command.y];
            }
            else if (command.command == 'quadratic curveto') {
                op = acc.operation.quadraticCurveTo([command.x, command.y], [command.x1, command.y1]);
                end = [command.x, command.y];
            }
            else if (command.command == 'elliptical arc') {
                // 50 50 0 1 1 0 200
                // we only have arcTo and arc to draw an ellipse
                // arcTo([tx1, ty1], [tx2, ty2], radius), only does short lines
                // arc(cx, cy, radius, startAngle, endAngle, counterclockwise), where x and y must be end of current path
                // which draws a circular arc
                // so we rescale the canvas to create an elliptical rotated arc
                // command:'elliptical arc', rx:5, ry:5, xAxisRotation:45, largeArc:true, sweep:false, x:40, y:20 }
                // ellipticArc([rx, ry], [x, y], [LA, SW])
                // https://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes
                // F.6.5 Conversion from endpoint to center parameterization
                var x1 = acc.end[0], y1 = acc.end[1], x2 = command.x, y2 = command.y, fa = command.largeArc, fs = command.sweep, rx = command.rx, ry = command.ry, psi = command.xAxisRotation;
                var cos = Math.cos(psi * Math.PI * 2.0 / 360);
                var sin = Math.sin(psi * Math.PI * 2.0 / 360);
                // step 1
                var x1_prime = cos * (x1 - x2) / 2.0 + sin * (y1 - y2) / 2.0;
                var y1_prime = -sin * (x1 - x2) / 2.0 + cos * (y1 - y2) / 2.0;
                // step 2
                var polarity2 = fs == fa ? -1 : 1;
                var numerator = (rx * rx * ry * ry - rx * rx * y1_prime * y1_prime - ry * ry * x1_prime * x1_prime);
                while (numerator < 0) {
                    rx *= 2;
                    ry *= 2;
                    // scale up until we find a solution
                    numerator = (rx * rx * ry * ry - rx * rx * y1_prime * y1_prime - ry * ry * x1_prime * x1_prime);
                    throw new Error("This needs to be scaled up without overshoot!");
                }
                var denominator = (rx * rx * y1_prime * y1_prime + ry * ry * x1_prime * x1_prime);
                var factor = polarity2 * Math.sqrt(numerator / denominator);
                var cx_prime = factor * rx * y1_prime / ry;
                var cy_prime = -factor * ry * x1_prime / rx;
                // step 3
                var cx = cos * cx_prime - sin * cy_prime + (x1 + x2) / 2;
                var cy = sin * cx_prime + cos * cy_prime + (y1 + y2) / 2;
                // step 4
                var angle = function (u, v) {
                    var polarity1 = u[0] * v[1] - u[1] * v[0] > 0 ? 1 : -1;
                    var u_length = Math.sqrt(u[0] * u[0] + u[1] * u[1]);
                    var v_length = Math.sqrt(v[0] * v[0] + v[1] * v[1]);
                    if (false && DEBUG) {
                        console.log("u, v", u, v);
                        console.log("angle numerator", (u[0] * v[0] + u[1] * v[1]));
                        console.log("angle denominator", u_length * v_length);
                    }
                    return polarity1 * Math.acos((u[0] * v[0] + u[1] * v[1]) /
                        (u_length * v_length));
                };
                var v0 = [1, 0];
                var v1 = [(x1_prime - cx_prime) / rx, (y1_prime - cy_prime) / ry];
                var v2 = [(-x1_prime - cx_prime) / rx, (-y1_prime - cy_prime) / ry];
                var theta1 = angle(v0, v1);
                var thetaDelta = angle(v1, v2);
                if (!fs && thetaDelta > 0)
                    thetaDelta -= Math.PI * 2;
                if (fs && thetaDelta < 0)
                    thetaDelta += Math.PI * 2;
                var radius = Math.sqrt((cx - x1) * (cx - x1) + (cy - y1) * (cy - y1));
                if (DEBUG) {
                    console.log("psi", psi);
                    console.log("rx, ry", rx, ry);
                    console.log("x1, y1", x1, y1);
                    console.log("x2, y2", x2, y2);
                    console.log("cos, sin", cos, sin);
                    console.log("x1_prime, y1_prime", x1_prime, y1_prime);
                    console.log("numerator", (rx * rx * ry * ry - rx * rx * y1_prime * y1_prime - ry * ry * x1_prime * x1_prime));
                    console.log("denominator", (rx * rx * y1_prime * y1_prime + ry * ry * x1_prime * x1_prime));
                    console.log("factor", factor);
                    console.log("cx_prime, cy_prime", cx_prime, cy_prime);
                    console.log("cx, cy", cx, cy);
                    console.log("v[0] ... v[2]", v0, v1, v2);
                    console.log("theta1, thetaDelta", theta1, thetaDelta);
                    console.log("radius", radius);
                }
                op = acc.operation
                    .arc([cx, cy], radius, theta1, theta1 + thetaDelta, theta1 > theta1 + thetaDelta);
                end = [command.x, command.y];
            }
            else {
                throw Error("unrecognised command: " + command.command + " in svg path " + svg);
            }
            return { end: end, operation: op };
        };
    });
    var intialState = { 'end': [0, 0], 'operation': before };
    console.log(commands);
    // perform the actual chaining on top of the base case
    return commands.reduce(function (acc, chain) {
        return chain(acc);
    }, intialState).operation;
}
exports.svgpath = svgpath;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9zdmcudHMiXSwibmFtZXMiOlsic3ZncGF0aCJdLCJtYXBwaW5ncyI6IkFBQUEsSUFBTyxNQUFNLFdBQVcsWUFBWSxDQUFDLENBQUM7QUFHdEMsSUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDO0FBRWpCLGlCQUNJLE1BQW9CLEVBQ3BCLEdBQVc7SUFHWEEsSUFBSUEsR0FBR0EsR0FBR0EsTUFBTUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7SUFPNUJBLE9BQU9BLENBQUNBLEdBQUdBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBO0lBQ2pCQSxrQkFBa0JBO0lBQ2xCQSwwRUFBMEVBO0lBQzFFQSxJQUFJQSxRQUFRQSxHQUFvQ0EsR0FBR0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsVUFBQUEsT0FBT0E7UUFDM0RBLEVBQUVBLENBQUNBLENBQUNBLE9BQU9BLENBQUNBLFFBQVFBLENBQUNBO1lBQUNBLE1BQU1BLElBQUlBLEtBQUtBLENBQUNBLDZEQUE2REEsQ0FBQ0EsQ0FBQ0E7UUFFckdBLE1BQU1BLENBQUNBLFVBQUNBLEdBQWFBO1lBQ2pCQSxJQUFJQSxFQUFnQkEsQ0FBQ0E7WUFDckJBLElBQUlBLEdBQWFBLENBQUNBO1lBQ2xCQSxFQUFFQSxDQUFDQSxDQUFDQSxPQUFPQSxDQUFDQSxPQUFPQSxJQUFJQSxRQUFRQSxDQUFDQSxDQUFDQSxDQUFDQTtnQkFDOUJBLEVBQUVBLEdBQUdBLEdBQUdBLENBQUNBLFNBQVNBLENBQUNBLE1BQU1BLENBQUNBLENBQUNBLE9BQU9BLENBQUNBLENBQUNBLEVBQUVBLE9BQU9BLENBQUNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO2dCQUNsREEsR0FBR0EsR0FBR0EsQ0FBQ0EsT0FBT0EsQ0FBQ0EsQ0FBQ0EsRUFBRUEsT0FBT0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQUE7WUFDaENBLENBQUNBO1lBQUNBLElBQUlBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLE9BQU9BLENBQUNBLE9BQU9BLElBQUlBLFFBQVFBLENBQUNBLENBQUNBLENBQUNBO2dCQUNyQ0EsRUFBRUEsR0FBR0EsR0FBR0EsQ0FBQ0EsU0FBU0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsQ0FBQ0EsT0FBT0EsQ0FBQ0EsQ0FBQ0EsRUFBRUEsT0FBT0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7Z0JBQ2xEQSxHQUFHQSxHQUFHQSxDQUFDQSxPQUFPQSxDQUFDQSxDQUFDQSxFQUFFQSxPQUFPQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFBQTtZQUNoQ0EsQ0FBQ0E7WUFBQ0EsSUFBSUEsQ0FBQ0EsRUFBRUEsQ0FBQ0EsQ0FBQ0EsT0FBT0EsQ0FBQ0EsT0FBT0EsSUFBSUEsV0FBV0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7Z0JBQ3hDQSxFQUFFQSxHQUFHQSxHQUFHQSxDQUFDQSxTQUFTQSxDQUFDQSxTQUFTQSxFQUFFQSxDQUFDQTtZQUNuQ0EsQ0FBQ0E7WUFBQ0EsSUFBSUEsQ0FBQ0EsRUFBRUEsQ0FBQ0EsQ0FBQ0EsT0FBT0EsQ0FBQ0EsT0FBT0EsSUFBSUEsU0FBU0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7Z0JBQ3RDQSxFQUFFQSxHQUFJQSxHQUFHQSxDQUFDQSxTQUFTQSxDQUFDQSxhQUFhQSxDQUFDQSxDQUFDQSxPQUFPQSxDQUFDQSxDQUFDQSxFQUFFQSxPQUFPQSxDQUFDQSxDQUFDQSxDQUFDQSxFQUFFQSxDQUFDQSxPQUFPQSxDQUFDQSxFQUFFQSxFQUFFQSxPQUFPQSxDQUFDQSxFQUFFQSxDQUFDQSxFQUFFQSxDQUFDQSxPQUFPQSxDQUFDQSxFQUFFQSxFQUFFQSxPQUFPQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQTtnQkFDOUdBLEdBQUdBLEdBQUdBLENBQUNBLE9BQU9BLENBQUNBLENBQUNBLEVBQUVBLE9BQU9BLENBQUNBLENBQUNBLENBQUNBLENBQUFBO1lBQ2hDQSxDQUFDQTtZQUFDQSxJQUFJQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQSxPQUFPQSxDQUFDQSxPQUFPQSxJQUFJQSxtQkFBbUJBLENBQUNBLENBQUNBLENBQUNBO2dCQUNoREEsRUFBRUEsR0FBR0EsR0FBR0EsQ0FBQ0EsU0FBU0EsQ0FBQ0EsZ0JBQWdCQSxDQUFDQSxDQUFDQSxPQUFPQSxDQUFDQSxDQUFDQSxFQUFFQSxPQUFPQSxDQUFDQSxDQUFDQSxDQUFDQSxFQUFFQSxDQUFDQSxPQUFPQSxDQUFDQSxFQUFFQSxFQUFFQSxPQUFPQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQTtnQkFDdEZBLEdBQUdBLEdBQUdBLENBQUNBLE9BQU9BLENBQUNBLENBQUNBLEVBQUVBLE9BQU9BLENBQUNBLENBQUNBLENBQUNBLENBQUFBO1lBQ2hDQSxDQUFDQTtZQUFDQSxJQUFJQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQSxPQUFPQSxDQUFDQSxPQUFPQSxJQUFJQSxnQkFBZ0JBLENBQUNBLENBQUNBLENBQUNBO2dCQUM3Q0Esb0JBQW9CQTtnQkFDcEJBLGdEQUFnREE7Z0JBQ2hEQSwrREFBK0RBO2dCQUMvREEseUdBQXlHQTtnQkFDekdBLDZCQUE2QkE7Z0JBQzdCQSwrREFBK0RBO2dCQUMvREEsbUdBQW1HQTtnQkFDbkdBLDBDQUEwQ0E7Z0JBQzFDQSxpRUFBaUVBO2dCQUNqRUEsNERBQTREQTtnQkFDNURBLElBQUlBLEVBQUVBLEdBQUdBLEdBQUdBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBLEVBQ2ZBLEVBQUVBLEdBQUdBLEdBQUdBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBLEVBQ2ZBLEVBQUVBLEdBQUdBLE9BQU9BLENBQUNBLENBQUNBLEVBQ2RBLEVBQUVBLEdBQUdBLE9BQU9BLENBQUNBLENBQUNBLEVBQ2RBLEVBQUVBLEdBQUdBLE9BQU9BLENBQUNBLFFBQVFBLEVBQ3JCQSxFQUFFQSxHQUFHQSxPQUFPQSxDQUFDQSxLQUFLQSxFQUNsQkEsRUFBRUEsR0FBR0EsT0FBT0EsQ0FBQ0EsRUFBRUEsRUFDZkEsRUFBRUEsR0FBR0EsT0FBT0EsQ0FBQ0EsRUFBRUEsRUFDZkEsR0FBR0EsR0FBR0EsT0FBT0EsQ0FBQ0EsYUFBYUEsQ0FBQ0E7Z0JBRWhDQSxJQUFJQSxHQUFHQSxHQUFHQSxJQUFJQSxDQUFDQSxHQUFHQSxDQUFDQSxHQUFHQSxHQUFHQSxJQUFJQSxDQUFDQSxFQUFFQSxHQUFHQSxHQUFHQSxHQUFHQSxHQUFHQSxDQUFDQSxDQUFDQTtnQkFDOUNBLElBQUlBLEdBQUdBLEdBQUdBLElBQUlBLENBQUNBLEdBQUdBLENBQUNBLEdBQUdBLEdBQUdBLElBQUlBLENBQUNBLEVBQUVBLEdBQUdBLEdBQUdBLEdBQUdBLEdBQUdBLENBQUNBLENBQUNBO2dCQUU5Q0EsU0FBU0E7Z0JBQ1RBLElBQUlBLFFBQVFBLEdBQUlBLEdBQUdBLEdBQUdBLENBQUNBLEVBQUVBLEdBQUdBLEVBQUVBLENBQUNBLEdBQUdBLEdBQUdBLEdBQUdBLEdBQUdBLEdBQUdBLENBQUNBLEVBQUVBLEdBQUdBLEVBQUVBLENBQUNBLEdBQUdBLEdBQUdBLENBQUNBO2dCQUM5REEsSUFBSUEsUUFBUUEsR0FBR0EsQ0FBQ0EsR0FBR0EsR0FBR0EsQ0FBQ0EsRUFBRUEsR0FBR0EsRUFBRUEsQ0FBQ0EsR0FBR0EsR0FBR0EsR0FBR0EsR0FBR0EsR0FBR0EsQ0FBQ0EsRUFBRUEsR0FBR0EsRUFBRUEsQ0FBQ0EsR0FBR0EsR0FBR0EsQ0FBQ0E7Z0JBRTlEQSxTQUFTQTtnQkFDVEEsSUFBSUEsU0FBU0EsR0FBR0EsRUFBRUEsSUFBSUEsRUFBRUEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7Z0JBQ2xDQSxJQUFJQSxTQUFTQSxHQUFHQSxDQUFDQSxFQUFFQSxHQUFHQSxFQUFFQSxHQUFHQSxFQUFFQSxHQUFHQSxFQUFFQSxHQUFHQSxFQUFFQSxHQUFHQSxFQUFFQSxHQUFHQSxRQUFRQSxHQUFHQSxRQUFRQSxHQUFHQSxFQUFFQSxHQUFHQSxFQUFFQSxHQUFHQSxRQUFRQSxHQUFHQSxRQUFRQSxDQUFDQSxDQUFDQTtnQkFDcEdBLE9BQU9BLFNBQVNBLEdBQUdBLENBQUNBLEVBQUVBLENBQUNBO29CQUNuQkEsRUFBRUEsSUFBSUEsQ0FBQ0EsQ0FBQ0E7b0JBQ1JBLEVBQUVBLElBQUlBLENBQUNBLENBQUNBO29CQUNSQSxvQ0FBb0NBO29CQUNwQ0EsU0FBU0EsR0FBR0EsQ0FBQ0EsRUFBRUEsR0FBR0EsRUFBRUEsR0FBR0EsRUFBRUEsR0FBR0EsRUFBRUEsR0FBR0EsRUFBRUEsR0FBR0EsRUFBRUEsR0FBR0EsUUFBUUEsR0FBR0EsUUFBUUEsR0FBR0EsRUFBRUEsR0FBR0EsRUFBRUEsR0FBR0EsUUFBUUEsR0FBR0EsUUFBUUEsQ0FBQ0EsQ0FBQ0E7b0JBRWhHQSxNQUFNQSxJQUFJQSxLQUFLQSxDQUFDQSwrQ0FBK0NBLENBQUNBLENBQUNBO2dCQUNyRUEsQ0FBQ0E7Z0JBRURBLElBQUlBLFdBQVdBLEdBQUdBLENBQUNBLEVBQUVBLEdBQUdBLEVBQUVBLEdBQUdBLFFBQVFBLEdBQUdBLFFBQVFBLEdBQUdBLEVBQUVBLEdBQUdBLEVBQUVBLEdBQUdBLFFBQVFBLEdBQUdBLFFBQVFBLENBQUNBLENBQUNBO2dCQUNsRkEsSUFBSUEsTUFBTUEsR0FBR0EsU0FBU0EsR0FBR0EsSUFBSUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsU0FBU0EsR0FBR0EsV0FBV0EsQ0FBQ0EsQ0FBQUE7Z0JBQzNEQSxJQUFJQSxRQUFRQSxHQUFJQSxNQUFNQSxHQUFHQSxFQUFFQSxHQUFHQSxRQUFRQSxHQUFHQSxFQUFFQSxDQUFDQTtnQkFDNUNBLElBQUlBLFFBQVFBLEdBQUdBLENBQUNBLE1BQU1BLEdBQUdBLEVBQUVBLEdBQUdBLFFBQVFBLEdBQUdBLEVBQUVBLENBQUNBO2dCQUU1Q0EsU0FBU0E7Z0JBQ1RBLElBQUlBLEVBQUVBLEdBQUdBLEdBQUdBLEdBQUdBLFFBQVFBLEdBQUdBLEdBQUdBLEdBQUdBLFFBQVFBLEdBQUdBLENBQUNBLEVBQUVBLEdBQUdBLEVBQUVBLENBQUNBLEdBQUdBLENBQUNBLENBQUFBO2dCQUN4REEsSUFBSUEsRUFBRUEsR0FBR0EsR0FBR0EsR0FBR0EsUUFBUUEsR0FBR0EsR0FBR0EsR0FBR0EsUUFBUUEsR0FBR0EsQ0FBQ0EsRUFBRUEsR0FBR0EsRUFBRUEsQ0FB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LENBQUNBLENBQUFBO2dCQUVwREEsSUFBSUEsTUFBTUEsR0FBR0EsSUFBSUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0EsRUFBRUEsR0FBR0EsRUFBRUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsRUFBRUEsR0FBR0EsRUFBRUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsRUFBRUEsR0FBR0EsRUFBRUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsRUFBRUEsR0FBR0EsRUFBRUEsQ0FBQ0EsQ0FBQ0EsQ0FBQUE7Z0JBRXJFQSxFQUFFQSxDQUFDQSxDQUFDQSxLQUFLQSxDQUFDQSxDQUFDQSxDQUFDQTtvQkFDUkEsT0FBT0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsS0FBS0EsRUFBRUEsR0FBR0EsQ0FBQ0EsQ0FBQUE7b0JBQ3ZCQSxPQUFPQSxDQUFDQSxHQUFHQSxDQUFDQSxRQUFRQSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFQSxDQUFDQSxDQUFBQTtvQkFDN0JBLE9BQU9BLENBQUNBLEdBQUdBLENBQUNBLFFBQVFBLEVBQUVBLEVBQUVBLEVBQUVBLEVBQUVBLENBQUNBLENBQUFBO29CQUM3QkEsT0FBT0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsUUFBUUEsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRUEsQ0FBQ0EsQ0FBQUE7b0JBQzdCQSxPQUFPQSxDQUFDQSxHQUFHQSxDQUFDQSxVQUFVQSxFQUFFQSxHQUFHQSxFQUFFQSxHQUFHQSxDQUFDQSxDQUFBQTtvQkFDakNBLE9BQU9BLENBQUNBLEdBQUdBLENBQUNBLG9CQUFvQkEsRUFBRUEsUUFBUUEsRUFBRUEsUUFBUUEsQ0FBQ0EsQ0FBQUE7b0JBQ3JEQSxPQUFPQSxDQUFDQSxHQUFHQSxDQUFDQSxXQUFXQSxFQUFFQSxDQUFDQSxFQUFFQSxHQUFHQSxFQUFFQSxHQUFHQSxFQUFFQSxHQUFHQSxFQUFFQSxHQUFHQSxFQUFFQSxHQUFHQSxFQUFFQSxHQUFHQSxRQUFRQSxHQUFHQSxRQUFRQSxHQUFHQSxFQUFFQSxHQUFHQSxFQUFFQSxHQUFHQSxRQUFRQSxHQUFHQSxRQUFRQSxDQUFDQSxDQUFDQSxDQUFBQTtvQkFDN0dBLE9BQU9BLENBQUNBLEdBQUdBLENBQUNBLGFBQWFBLEVBQUVBLENBQUNBLEVBQUVBLEdBQUdBLEVBQUVBLEdBQUdBLFFBQVFBLEdBQUdBLFFBQVFBLEdBQUdBLEVBQUVBLEdBQUdBLEVBQUVBLEdBQUdBLFFBQVFBLEdBQUdBLFFBQVFBLENBQUNBLENBQUNBLENBQUFBO29CQUMzRkEsT0FBT0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsUUFBUUEsRUFBRUEsTUFBTUEsQ0FBQ0EsQ0FBQUE7b0JBQzdCQSxPQUFPQSxDQUFDQSxHQUFHQSxDQUFDQSxvQkFBb0JBLEVBQUVBLFFBQVFBLEVBQUVBLFFBQVFBLENBQUNBLENBQUFBO29CQUNyREEsT0FBT0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsUUFBUUEsRUFBRUEsRUFBRUEsRUFBRUEsRUFBRUEsQ0FBQ0EsQ0FBQUE7b0JBQzdCQSxPQUFPQSxDQUFDQSxHQUFHQSxDQUFDQSxlQUFlQSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFQSxFQUFFQSxDQUFDQSxDQUFBQTtvQkFDeENBLE9BQU9BLENBQUNBLEdBQUdBLENBQUNBLG9CQUFvQkEsRUFBRUEsTUFBTUEsRUFBRUEsVUFBVUEsQ0FBQ0EsQ0FBQUE7b0JBQ3JEQSxPQUFPQSxDQUFDQSxHQUFHQSxDQUFDQSxRQUFRQSxFQUFFQSxNQUFNQSxDQUFDQSxDQUFBQTtnQkFFakNBLENBQUNBO2dCQUdEQSxFQUFFQSxHQUFHQSxHQUFHQSxDQUFDQSxTQUFTQTtxQkFDYkEsR0FBR0EsQ0FBQ0EsQ0FBQ0EsRUFBRUEsRUFBRUEsRUFBRUEsQ0FBQ0EsRUFBRUEsTUFBTUEsRUFBRUEsTUFBTUEsRUFBRUEsTUFBTUEsR0FBR0EsVUFBVUEsRUFBRUEsTUFBTUEsR0FBR0EsTUFBTUEsR0FBR0EsVUFBVUEsQ0FBQ0EsQ0FBQUE7Z0JBQ3JGQSxHQUFHQSxHQUFHQSxDQUFDQSxPQUFPQSxDQUFDQSxDQUFDQSxFQUFFQSxPQUFPQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFBQTtZQUNoQ0EsQ0FBQ0E7WUFBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0E7Z0JBQ0pBLE1BQU1BLEtBQUtBLENBQUNBLHdCQUF3QkEsR0FBR0EsT0FBT0EsQ0FBQ0EsT0FBT0EsR0FBR0EsZUFBZUEsR0FBR0EsR0FBR0EsQ0FBQ0EsQ0FBQUE7WUFDbkZBLENBQUNBO1lBQ0RBLE1BQU1BLENBQUNBLEVBQUNBLEdBQUdBLEVBQUVBLEdBQUdBLEVBQUVBLFNBQVNBLEVBQUVBLEVBQUVBLEVBQUNBLENBQUNBO1FBQ3JDQSxDQUFDQSxDQUFBQTtJQUNMQSxDQUFDQSxDQUFDQSxDQUFBQTtJQUdGQSxJQUFJQSxXQUFXQSxHQUFhQSxFQUFDQSxLQUFLQSxFQUFFQSxDQUFDQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQSxFQUFFQSxXQUFXQSxFQUFFQSxNQUFNQSxFQUFDQSxDQUFBQTtJQUVoRUEsT0FBT0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsUUFBUUEsQ0FBQ0EsQ0FBQ0E7SUFDdEJBLHNEQUFzREE7SUFDdERBLE1BQU1BLENBQUNBLFFBQVFBLENBQUNBLE1BQU1BLENBQ2xCQSxVQUFDQSxHQUFhQSxFQUFFQSxLQUFrQ0E7UUFDOUNBLE1BQU1BLENBQUNBLEtBQUtBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBO0lBQ3RCQSxDQUFDQSxFQUNEQSxXQUFXQSxDQUNkQSxDQUFDQSxTQUFTQSxDQUFDQTtBQUNoQkEsQ0FBQ0E7QUF4SmUsZUFBTyxVQXdKdEIsQ0FBQSIsImZpbGUiOiJzcmMvc3ZnLmpzIiwic291cmNlc0NvbnRlbnQiOltudWxsXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
