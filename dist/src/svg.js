var parser = require('../peg/svg');
var Parameter = require('./Parameter');
var DEBUG = true;
function svgpath(before, svg) {
    var args = [];
    for (var _i = 2; _i < arguments.length; _i++) {
        args[_i - 2] = arguments[_i];
    }
    var ast = parser.parse(svg);
    if (DEBUG)
        console.log('SVG AST', ast);
    // turn the array of commands into a list of chainable animation functions
    var commands = ast.map(function (command) {
        return function (acc) {
            var op;
            var end;
            var x, y, x1, y1, x2, y2, rx, ry, largeArc, sweep, xAxisRotation;
            function bind(command) {
                if (typeof command === 'string') {
                    if (command[0] == '%') {
                        var index = parseFloat(command.slice(1)) - 1; // %1 means arg 0
                        var arg = args[index];
                        if (args === undefined)
                            throw new Error("Index out of bounds");
                        return arg;
                    }
                    else {
                        throw new Error(command);
                    }
                }
                else {
                    return command;
                }
            }
            function add(a, b) {
                return Parameter.from(a).combine(function () { return function (a, b) { return a + b; }; }, Parameter.from(b));
            }
            if (command.relative) {
                if (command.x != undefined)
                    x = add(bind(command.x), acc.end[0]);
                if (command.y != undefined)
                    y = add(bind(command.y), acc.end[1]);
                if (command.x1 != undefined)
                    x1 = add(bind(command.x1), acc.end[0]);
                if (command.y1 != undefined)
                    y1 = add(bind(command.y1), acc.end[1]);
                if (command.x2 != undefined)
                    x2 = add(bind(command.x2), acc.end[0]);
                if (command.y2 != undefined)
                    y2 = add(bind(command.y2), acc.end[1]);
            }
            else {
                if (command.x != undefined)
                    x = bind(command.x);
                if (command.y != undefined)
                    y = bind(command.y);
                if (command.x1 != undefined)
                    x1 = bind(command.x1);
                if (command.y1 != undefined)
                    y1 = bind(command.y1);
                if (command.x2 != undefined)
                    x2 = bind(command.x2);
                if (command.y2 != undefined)
                    y2 = bind(command.y2);
            }
            if (command.largeArc != undefined)
                largeArc = command.largeArc;
            if (command.sweep != undefined)
                sweep = command.sweep;
            if (command.rx != undefined)
                rx = bind(command.rx);
            if (command.ry != undefined)
                ry = bind(command.ry);
            if (command.xAxisRotation != undefined)
                xAxisRotation = bind(command.xAxisRotation);
            if (command.command == 'moveto') {
                op = acc.operation.moveTo(Parameter.point(x, y));
                end = [x, y];
            }
            else if (command.command == 'lineto') {
                op = acc.operation.lineTo(Parameter.point(x, y));
                end = [x, y];
            }
            else if (command.command == 'vertical lineto') {
                console.log("acc.end[0]", acc.end[0]);
                console.log("y", y);
                op = acc.operation.lineTo(Parameter.point(acc.end[0], y));
                end = [acc.end[0], y];
            }
            else if (command.command == 'horizontal lineto') {
                op = acc.operation.lineTo(Parameter.point(x, acc.end[1]));
                end = [x, acc.end[1]];
            }
            else if (command.command == 'closepath') {
                op = acc.operation.closePath();
            }
            else if (command.command == 'curveto') {
                op = acc.operation.bezierCurveTo(Parameter.point(x1, y1), Parameter.point(x2, y2), Parameter.point(x, y));
                end = [x, y];
            }
            else if (command.command == 'quadratic curveto') {
                op = acc.operation.quadraticCurveTo(Parameter.point(x1, y1), Parameter.point(x, y));
                end = [x, y];
            }
            else if (command.command == 'elliptical arc') {
                // 50 50 0 1 1 0 200
                // we only have arcTo and arc to draw an ellipse
                // arcTo([tx1, ty1], [tx2, ty2], radius), only does short lines
                // arc(cx, cy, radius, startAngle, endAngle, counterclockwise), where x and y must be end of current path
                // which draws a circular arc
                // so we rescale the canvas to create an elliptical rotated arc
                // command:'elliptical arc', rx:5, ry:5, xAxisRotation:45, largeArc:true, sweep:false, x:40, y:20 }
                // ellipticArc([rx, ry], [x, y], [LA, SW])
                // https://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes
                // F.6.5 Conversion from endpoint to center parameterization
                op = acc.operation.ellipticArcTo(Parameter.point(acc.end[0], acc.end[1]), Parameter.point(rx, ry), xAxisRotation, command.largeArc, command.sweep, Parameter.point(x, y));
                end = [x, y];
            }
            else {
                throw Error("unrecognised command: " + command.command + " in svg path " + svg);
            }
            return { end: end, operation: op };
        };
    });
    var intialState = { 'end': [0, 0], 'operation': before };
    if (DEBUG)
        console.log(commands);
    // perform the actual chaining on top of the base case
    return commands.reduce(function (acc, chain) {
        return chain(acc);
    }, intialState).operation;
}
exports.svgpath = svgpath;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9zdmcudHMiXSwibmFtZXMiOlsic3ZncGF0aCIsInN2Z3BhdGguYmluZCIsInN2Z3BhdGguYWRkIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFPLE1BQU0sV0FBVyxZQUFZLENBQUMsQ0FBQztBQUV0QyxJQUFZLFNBQVMsV0FBTSxhQUFhLENBQUMsQ0FBQTtBQUV6QyxJQUFJLEtBQUssR0FBRyxJQUFJLENBQUM7QUFFakIsaUJBQ0ksTUFBb0IsRUFDcEIsR0FBVztJQUNYQSxjQUF1QkE7U0FBdkJBLFdBQXVCQSxDQUF2QkEsc0JBQXVCQSxDQUF2QkEsSUFBdUJBO1FBQXZCQSw2QkFBdUJBOztJQUd2QkEsSUFBSUEsR0FBR0EsR0FBR0EsTUFBTUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7SUF1QjVCQSxFQUFFQSxDQUFDQSxDQUFDQSxLQUFLQSxDQUFDQTtRQUFDQSxPQUFPQSxDQUFDQSxHQUFHQSxDQUFDQSxTQUFTQSxFQUFFQSxHQUFHQSxDQUFDQSxDQUFDQTtJQUN2Q0EsMEVBQTBFQTtJQUMxRUEsSUFBSUEsUUFBUUEsR0FBb0NBLEdBQUdBLENBQUNBLEdBQUdBLENBQUNBLFVBQUNBLE9BQWdCQTtRQUNyRUEsTUFBTUEsQ0FBQ0EsVUFBQ0EsR0FBYUE7WUFDakJBLElBQUlBLEVBQWdCQSxDQUFDQTtZQUNyQkEsSUFBSUEsR0FBaUNBLENBQUNBO1lBQ3RDQSxJQUFJQSxDQUFlQSxFQUFFQSxDQUFlQSxFQUNoQ0EsRUFBZ0JBLEVBQUVBLEVBQWdCQSxFQUNsQ0EsRUFBZ0JBLEVBQUVBLEVBQWdCQSxFQUNsQ0EsRUFBZ0JBLEVBQUVBLEVBQWdCQSxFQUNsQ0EsUUFBdUJBLEVBQUVBLEtBQW9CQSxFQUM3Q0EsYUFBMkJBLENBQUNBO1lBRWhDQSxjQUFjQSxPQUF3QkE7Z0JBQ2xDQyxFQUFFQSxDQUFDQSxDQUFDQSxPQUFPQSxPQUFPQSxLQUFLQSxRQUFRQSxDQUFDQSxDQUFDQSxDQUFDQTtvQkFDOUJBLEVBQUVBLENBQUNBLENBQUNBLE9BQU9BLENBQUNBLENBQUNBLENBQUNBLElBQUlBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBO3dCQUNwQkEsSUFBSUEsS0FBS0EsR0FBR0EsVUFBVUEsQ0FBQ0EsT0FBT0EsQ0FBQ0EsS0FBS0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsaUJBQWlCQTt3QkFDL0RBLElBQUlBLEdBQUdBLEdBQUdBLElBQUlBLENBQUNBLEtBQUtBLENBQUNBLENBQUNBO3dCQUN0QkEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsS0FBS0EsU0FBU0EsQ0FBQ0E7NEJBQUNBLE1BQU1BLElBQUlBLEtBQUtBLENBQUNBLHFCQUFxQkEsQ0FBQ0EsQ0FBQ0E7d0JBQy9EQSxNQUFNQSxDQUFDQSxHQUFHQSxDQUFDQTtvQkFDZkEsQ0FBQ0E7b0JBQUNBLElBQUlBLENBQUNBLENBQUNBO3dCQUNKQSxNQUFNQSxJQUFJQSxLQUFLQSxDQUFDQSxPQUFPQSxDQUFDQSxDQUFDQTtvQkFDN0JBLENBQUNBO2dCQUNMQSxDQUFDQTtnQkFBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0E7b0JBQ0pBLE1BQU1BLENBQUNBLE9BQU9BLENBQUFBO2dCQUNsQkEsQ0FBQ0E7WUFDTEEsQ0FBQ0E7WUFFREQsYUFBYUEsQ0FBZUEsRUFBRUEsQ0FBZUE7Z0JBQ3pDRSxNQUFNQSxDQUFDQSxTQUFTQSxDQUFDQSxJQUFJQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQSxPQUFPQSxDQUM1QkEsY0FBTUEsT0FBQUEsVUFBQ0EsQ0FBU0EsRUFBRUEsQ0FBU0EsSUFBS0EsT0FBQUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsRUFBTEEsQ0FBS0EsRUFBL0JBLENBQStCQSxFQUNyQ0EsU0FBU0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQUE7WUFDMUJBLENBQUNBO1lBRURGLEVBQUVBLENBQUNBLENBQUNBLE9BQU9BLENBQUNBLFFBQVFBLENBQUNBLENBQUNBLENBQUNBO2dCQUNuQkEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsT0FBT0EsQ0FBQ0EsQ0FBQ0EsSUFBSUEsU0FBU0EsQ0FBQ0E7b0JBQUNBLENBQUNBLEdBQUdBLEdBQUdBLENBQUNBLElBQUlBLENBQUNBLE9BQU9BLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLEdBQUdBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO2dCQUNqRUEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsT0FBT0EsQ0FBQ0EsQ0FBQ0EsSUFBSUEsU0FBU0EsQ0FBQ0E7b0JBQUNBLENBQUNBLEdBQUdBLEdBQUdBLENBQUNBLElBQUlBLENBQUNBLE9BQU9BLENBQUNBLENBQUNBLENBQUNBLEVBQUVBLEdBQUdBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO2dCQUNqRUEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsT0FBT0EsQ0FBQ0EsRUFBRUEsSUFBSUEsU0FBU0EsQ0FBQ0E7b0JBQUNBLEVBQUVBLEdBQUdBLEdBQUdBLENBQUNBLElBQUlBLENBQUNBLE9BQU9BLENBQUNBLEVBQUVBLENBQUNBLEVBQUVBLEdBQUdBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO2dCQUNwRUEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsT0FBT0EsQ0FBQ0EsRUFBRUEsSUFBSUEsU0FBU0EsQ0FBQ0E7b0JBQUNBLEVBQUVBLEdBQUdBLEdBQUdBLENBQUNBLElBQUlBLENBQUNBLE9BQU9BLENBQUNBLEVBQUVBLENBQUNBLEVBQUVBLEdBQUdBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO2dCQUNwRUEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsT0FBT0EsQ0FBQ0EsRUFBRUEsSUFBSUEsU0FBU0EsQ0FBQ0E7b0JBQUNBLEVBQUVBLEdBQUdBLEdBQUdBLENBQUNBLElBQUlBLENBQUNBLE9BQU9BLENBQUNBLEVBQUVBLENBQUNBLEVBQUVBLEdBQUdBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO2dCQUNwRUEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsT0FBT0EsQ0FBQ0EsRUFBRUEsSUFBSUEsU0FBU0EsQ0FBQ0E7b0JBQUNBLEVBQUVBLEdBQUdBLEdBQUdBLENBQUNBLElBQUlBLENBQUNBLE9BQU9BLENBQUNBLEVBQUVBLENBQUNBLEVBQUVBLEdBQUdBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO1lBQ3hFQSxDQUFDQTtZQUFDQSxJQUFJQSxDQUFDQSxDQUFDQTtnQkFDSkEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsT0FBT0EsQ0FBQ0EsQ0FBQ0EsSUFBSUEsU0FBU0EsQ0FBQ0E7b0JBQUNBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLE9BQU9BLENBQUNBLENBQUNBLENBQUNBLENBQUNBO2dCQUNoREEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsT0FBT0EsQ0FBQ0EsQ0FBQ0EsSUFBSUEsU0FBU0EsQ0FBQ0E7b0JBQUNBLENBQUNBLEdBQUdBLElBQUlBLENBQUNBLE9BQU9BLENBQUNBLENBQUNBLENBQUNBLENBQUNBO2dCQUNoREEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsT0FBT0EsQ0FBQ0EsRUFBRUEsSUFBSUEsU0FBU0EsQ0FBQ0E7b0JBQUNBLEVBQUVBLEdBQUdBLElBQUlBLENBQUNBLE9BQU9BLENBQUNBLEVBQUVBLENBQUNBLENBQUNBO2dCQUNuREEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsT0FBT0EsQ0FBQ0EsRUFBRUEsSUFBSUEsU0FBU0EsQ0FBQ0E7b0JBQUNBLEVBQUVBLEdBQUdBLElBQUlBLENBQUNBLE9BQU9BLENBQUNBLEVBQUVBLENBQUNBLENBQUNBO2dCQUNuREEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsT0FBT0EsQ0FBQ0EsRUFBRUEsSUFBSUEsU0FBU0EsQ0FBQ0E7b0JBQUNBLEVBQUVBLEdBQUdBLElBQUlBLENBQUNBLE9BQU9BLENBQUNBLEVBQUVBLENBQUNBLENBQUNBO2dCQUNuREEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsT0FBT0EsQ0FBQ0EsRUFBRUEsSUFBSUEsU0FBU0EsQ0FBQ0E7b0JBQUNBLEVBQUVBLEdBQUdBLElBQUlBLENBQUNBLE9BQU9BLENBQUNBLEVBQUVBLENBQUNBLENBQUNBO1lBQ3ZEQSxDQUFDQTtZQUNEQSxFQUFFQSxDQUFDQSxDQUFDQSxPQUFPQSxDQUFDQSxRQUFRQSxJQUFJQSxTQUFTQSxDQUFDQTtnQkFBQ0EsUUFBUUEsR0FBR0EsT0FBT0EsQ0FBQ0EsUUFBUUEsQ0FBQ0E7WUFDL0RBLEVBQUVBLENBQUNBLENBQUNBLE9BQU9BLENBQUNBLEtBQUtBLElBQUlBLFNBQVNBLENBQUNBO2dCQUFDQSxLQUFLQSxHQUFHQSxPQUFPQSxDQUFDQSxLQUFLQSxDQUFDQTtZQUN0REEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsT0FBT0EsQ0FBQ0EsRUFBRUEsSUFBSUEsU0FBU0EsQ0FBQ0E7Z0JBQUNBLEVBQUVBLEdBQUdBLElBQUlBLENBQUNBLE9BQU9BLENBQUNBLEVBQUVBLENBQUNBLENBQUNBO1lBQ25EQSxFQUFFQSxDQUFDQSxDQUFDQSxPQUFPQSxDQUFDQSxFQUFFQSxJQUFJQSxTQUFTQSxDQUFDQTtnQkFBQ0EsRUFBRUEsR0FBR0EsSUFBSUEsQ0FBQ0EsT0FBT0EsQ0FBQ0EsRUFBRUEsQ0FBQ0EsQ0FBQ0E7WUFDbkRBLEVBQUVBLENBQUNBLENBQUNBLE9BQU9BLENBQUNBLGFBQWFBLElBQUlBLFNBQVNBLENBQUNBO2dCQUFDQSxhQUFhQSxHQUFHQSxJQUFJQSxDQUFDQSxPQUFPQSxDQUFDQSxhQUFhQSxDQUFDQSxDQUFDQTtZQUVwRkEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsT0FBT0EsQ0FBQ0EsT0FBT0EsSUFBSUEsUUFBUUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7Z0JBQzlCQSxFQUFFQSxHQUFHQSxHQUFHQSxDQUFDQSxTQUFTQSxDQUFDQSxNQUFNQSxDQUFDQSxTQUFTQSxDQUFDQSxLQUFLQSxDQUFDQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtnQkFDakRBLEdBQUdBLEdBQUdBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLENBQUFBO1lBQ2hCQSxDQUFDQTtZQUFDQSxJQUFJQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQSxPQUFPQSxDQUFDQSxPQUFPQSxJQUFJQSxRQUFRQSxDQUFDQSxDQUFDQSxDQUFDQTtnQkFDckNBLEVBQUVBLEdBQUdBLEdBQUdBLENBQUNBLFNBQVNBLENBQUNBLE1BQU1BLENBQUNBLFNBQVNBLENBQUNBLEtBQUtBLENBQUNBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO2dCQUNqREEsR0FBR0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsRUFBRUEsQ0FBQ0EsQ0FBQ0EsQ0FBQUE7WUFDaEJBLENBQUNBO1lBQUNBLElBQUlBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLE9BQU9BLENBQUNBLE9BQU9BLElBQUlBLGlCQUFpQkEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7Z0JBQzlDQSxPQUFPQSxDQUFDQSxHQUFHQSxDQUFDQSxZQUFZQSxFQUFFQSxHQUFHQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFBQTtnQkFDckNBLE9BQU9BLENBQUNBLEdBQUdBLENBQUNBLEdBQUdBLEVBQUVBLENBQUNBLENBQUNBLENBQUFBO2dCQUNuQkEsRUFBRUEsR0FBR0EsR0FBR0EsQ0FBQ0EsU0FBU0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsU0FBU0EsQ0FBQ0EsS0FBS0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsRUFBRUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7Z0JBQzFEQSxHQUFHQSxHQUFHQSxDQUFDQSxHQUFHQSxDQUFDQSxHQUFHQSxDQUFDQSxDQUFDQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFBQTtZQUN6QkEsQ0FBQ0E7WUFBQ0EsSUFBSUEsQ0FBQ0EsRUFBRUEsQ0FBQ0EsQ0FBQ0EsT0FBT0EsQ0FBQ0EsT0FBT0EsSUFBSUEsbUJBQW1CQSxDQUFDQSxDQUFDQSxDQUFDQTtnQkFDaERBLEVBQUVBLEdBQUdBLEdBQUdBLENBQUNBLFNBQVNBLENBQUNBLE1BQU1BLENBQUNBLFNBQVNBLENBQUNBLEtBQUtBLENBQUNBLENBQUNBLEVBQUVBLEdBQUdBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO2dCQUMxREEsR0FBR0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsRUFBRUEsR0FBR0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQUE7WUFDekJBLENBQUNBO1lBQUNBLElBQUlBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLE9BQU9BLENBQUNBLE9BQU9BLElBQUlBLFdBQVdBLENBQUNBLENBQUNBLENBQUNBO2dCQUN4Q0EsRUFBRUEsR0FBR0EsR0FBR0EsQ0FBQ0EsU0FBU0EsQ0FBQ0EsU0FBU0EsRUFBRUEsQ0FBQ0E7WUFFbkNBLENBQUNBO1lBQUNBLElBQUlBLENBQUNBLEVBQUVBLENBQUNBLENBQUNBLE9BQU9BLENBQUNBLE9BQU9BLElBQUlBLFNBQVNBLENBQUNBLENBQUNBLENBQUNBO2dCQUN0Q0EsRUFBRUEsR0FBSUEsR0FBR0EsQ0FBQ0EsU0FBU0EsQ0FBQ0EsYUFBYUEsQ0FBQ0EsU0FBU0EsQ0FBQ0EsS0FBS0EsQ0FBQ0EsRUFBRUEsRUFBRUEsRUFBRUEsQ0FBQ0EsRUFBRUEsU0FBU0EsQ0FBQ0EsS0FBS0EsQ0FBQ0EsRUFBRUEsRUFBRUEsRUFBRUEsQ0FBQ0EsRUFBRUEsU0FBU0EsQ0FBQ0EsS0FBS0EsQ0FBQ0EsQ0FBQ0EsRUFBRUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7Z0JBQzNHQSxHQUFHQSxHQUFHQSxDQUFDQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFBQTtZQUNoQkEsQ0FBQ0E7WUFBQ0EsSUFBSUEsQ0FBQ0EsRUFBRUEsQ0FBQ0EsQ0FBQ0EsT0FBT0EsQ0FBQ0EsT0FBT0EsSUFBSUEsbUJBQW1CQSxDQUFDQSxDQUFDQSxDQUFDQTtnQkFDaERBLEVBQUVBLEdBQUdBLEdBQUdBLENBQUNBLFNBQVNBLENBQUNBLGdCQUFnQkEsQ0FBQ0EsU0FBU0EsQ0FBQ0EsS0FBS0EsQ0FBQ0EsRUFBRUEsRUFBRUEsRUFBRUEsQ0FBQ0EsRUFBRUEsU0FBU0EsQ0FBQ0EsS0FBS0EsQ0FBQ0EsQ0FBQ0EsRUFBRUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7Z0JBQ3BGQSxHQUFHQSxHQUFHQSxDQUFDQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFBQTtZQUNoQkEsQ0FBQ0E7WUFBQ0EsSUFBSUEsQ0FBQ0EsRUFBRUEsQ0FBQ0EsQ0FBQ0EsT0FBT0EsQ0FBQ0EsT0FBT0EsSUFBSUEsZ0JBQWdCQSxDQUFDQSxDQUFDQSxDQUFDQTtnQkFDN0NBLG9CQUFvQkE7Z0JBQ3BCQSxnREFBZ0RBO2dCQUNoREEsK0RBQStEQTtnQkFDL0RBLHlHQUF5R0E7Z0JBQ3pHQSw2QkFBNkJBO2dCQUM3QkEsK0RBQStEQTtnQkFDL0RBLG1HQUFtR0E7Z0JBQ25HQSwwQ0FBMENBO2dCQUMxQ0EsaUVBQWlFQTtnQkFDakVBLDREQUE0REE7Z0JBQzVEQSxFQUFFQSxHQUFHQSxHQUFHQSxDQUFDQSxTQUFTQSxDQUFDQSxhQUFhQSxDQUM1QkEsU0FBU0EsQ0FBQ0EsS0FBS0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsRUFBRUEsR0FBR0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsRUFDdkNBLFNBQVNBLENBQUNBLEtBQUtBLENBQUNBLEVBQUVBLEVBQUVBLEVBQUVBLENBQUNBLEVBQ3ZCQSxhQUFhQSxFQUNiQSxPQUFPQSxDQUFDQSxRQUFRQSxFQUNoQkEsT0FBT0EsQ0FBQ0EsS0FBS0EsRUFDYkEsU0FBU0EsQ0FBQ0EsS0FBS0EsQ0FBQ0EsQ0FBQ0EsRUFBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7Z0JBRTFCQSxHQUFHQSxHQUFHQSxDQUFDQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQSxDQUFBQTtZQUNoQkEsQ0FBQ0E7WUFBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0E7Z0JBQ0pBLE1BQU1BLEtBQUtBLENBQUNBLHdCQUF3QkEsR0FBR0EsT0FBT0EsQ0FBQ0EsT0FBT0EsR0FBR0EsZUFBZUEsR0FBR0EsR0FBR0EsQ0FBQ0EsQ0FBQUE7WUFDbkZBLENBQUNBO1lBQ0RBLE1BQU1BLENBQUNBLEVBQUNBLEdBQUdBLEVBQUVBLEdBQUdBLEVBQUVBLFNBQVNBLEVBQUVBLEVBQUVBLEVBQUNBLENBQUNBO1FBQ3JDQSxDQUFDQSxDQUFBQTtJQUNMQSxDQUFDQSxDQUFDQSxDQUFBQTtJQUdGQSxJQUFJQSxXQUFXQSxHQUFhQSxFQUFDQSxLQUFLQSxFQUFFQSxDQUFDQSxDQUFDQSxFQUFFQSxDQUFDQSxDQUFDQSxFQUFFQSxXQUFXQSxFQUFFQSxNQUFNQSxFQUFDQSxDQUFBQTtJQUVoRUEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsS0FBS0EsQ0FBQ0E7UUFBQ0EsT0FBT0EsQ0FBQ0EsR0FBR0EsQ0FBQ0EsUUFBUUEsQ0FBQ0EsQ0FBQ0E7SUFDakNBLHNEQUFzREE7SUFDdERBLE1BQU1BLENBQUNBLFFBQVFBLENBQUNBLE1BQU1BLENBQ2xCQSxVQUFDQSxHQUFhQSxFQUFFQSxLQUFrQ0E7UUFDOUNBLE1BQU1BLENBQUNBLEtBQUtBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBO0lBQ3RCQSxDQUFDQSxFQUNEQSxXQUFXQSxDQUNkQSxDQUFDQSxTQUFTQSxDQUFDQTtBQUNoQkEsQ0FBQ0E7QUFqSmUsZUFBTyxVQWlKdEIsQ0FBQSIsImZpbGUiOiJzcmMvc3ZnLmpzIiwic291cmNlc0NvbnRlbnQiOltudWxsXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
